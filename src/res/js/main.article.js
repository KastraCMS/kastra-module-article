(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(62)},31:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(21),i=a.n(s),c=a(64),r=(a(31),a(6)),o=a(7),d=a(9),m=a(8),u=a(10),h=a(66),g=a(65),p=a(63),E=function(e){return l.a.createElement("div",{className:"modal fade",id:e.id,tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.a.createElement("div",{className:"modal-content text-white bg-dark"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},e.title),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},e.message),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",onClick:e.onConfirm,className:"btn btn-outline-info","data-dismiss":"modal"},e.confirmLabel),l.a.createElement("button",{type:"button",className:"btn btn-outline-info","data-dismiss":"modal"},e.cancelLabel)))))},b=function(e){return e.isLoading?l.a.createElement("div",{id:"loader-component"},l.a.createElement("div",{className:"loader-content"},l.a.createElement("div",{className:"loader"},l.a.createElement("div",{className:"inner one"}),l.a.createElement("div",{className:"inner two"}),l.a.createElement("div",{className:"inner three"})),l.a.createElement("p",{className:"message"},e.message))):null},f=a(22),v=function(){var e=document.getElementById("RequestVerificationToken");return Object(f.isNil)(e)?"empty":e.value},y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={moduleId:e.match.params.moduleId||0,isLoading:!1,loadingMessage:"",articles:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadArticles()}},{key:"loadArticles",value:function(){var e=this;this.setState({isLoading:!0,loadingMessage:"Loading articles ..."}),fetch("/article/list/".concat(this.state.moduleId),{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){e.setState({articles:t,isLoading:!1})}).catch(function(e){this.setState({isLoading:!1}),console.log("Error: \n",e)})}},{key:"handleDelete",value:function(e){var t=this;this.setState({isLoading:!0,loadingMessage:"Deleting article ..."}),fetch("/article/delete",{method:"DELETE",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json",RequestVerificationToken:v()},body:JSON.stringify(e)}).then(function(){t.loadArticles()}).catch(function(e){this.setState({isLoading:!1}),console.log("Error: \n",e)})}},{key:"renderArticles",value:function(){var e=this;return this.state.articles.map(function(t,a){var n="dialog-".concat(a);return l.a.createElement("tr",{key:a},l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.dateUpdated),l.a.createElement("td",null,l.a.createElement(p.a,{to:"/admin/module/settings/".concat(e.state.moduleId,"/settings/article/").concat(t.articleId)},l.a.createElement("span",{className:"ion-compose"}))),l.a.createElement("td",null,l.a.createElement("a",{href:"",onClick:function(e){return e.preventDefault()},"data-toggle":"modal","data-target":"#".concat(n)},l.a.createElement("span",{className:"ion-trash-a"})),l.a.createElement(E,{id:n,title:"Delete article",message:"Are you sure that you want to delete the article ".concat(t.title," ?"),onConfirm:function(){return e.handleDelete(t.articleId)},confirmLabel:"Delete",cancelLabel:"Cancel"})))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"text-white m-sm-5 p-5 bg-dark clearfix"},l.a.createElement(b,{isLoading:this.state.isLoading,message:this.state.loadingMessage}),l.a.createElement("h2",{className:"mb-5 text-center"},"Articles"),l.a.createElement(p.a,{to:"/admin/module/settings/".concat(this.state.moduleId,"/settings/article/"),className:"btn btn-outline-info mb-4"},"New"),l.a.createElement("table",{className:"table table-dark bg-dark"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Name"),l.a.createElement("th",{scope:"col"},"Date"),l.a.createElement("th",{scope:"col"},"Edit"),l.a.createElement("th",{scope:"col"},"Delete"))),l.a.createElement("tbody",null,this.renderArticles())))}}]),t}(n.Component),C=a(17),N=a(5),k=function(e){var t=e.displayError?"form-control border-danger":"form-control";return l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:e.name,className:"col-sm-2 col-form-label"},e.title),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{id:e.name,className:t,type:e.type,name:e.name,value:e.value,onChange:e.handleChange})))},O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(N.a)(a)),a.handleClose=e.handleClose.bind(Object(N.a)(a)),a.state={display:!1,message:"",messages:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({display:e.display,message:e.message,messages:e.messages})}},{key:"handleClick",value:function(e){this.setState({display:!1}),e.preventDefault(),this.handleClose()}},{key:"render",value:function(){var e;return e=void 0!==this.state.messages&&this.state.messages.length>0?l.a.createElement("ul",null,this.state.messages.map(function(e,t){return l.a.createElement("li",{key:t},e)})):this.state.message,this.state.display?l.a.createElement("div",{className:"alert alert-".concat(this.props.type," alert-dismissible fade show"),role:"alert"},e,l.a.createElement("button",{type:"button",className:"close",onClick:this.handleClick,"data-dismiss":"alert","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null}}]),t}(n.Component),j=a(23),S=a.n(j),I=a(24),L=a.n(I),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(N.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(N.a)(a)),a.closeErrorMessage=a.closeErrorMessage.bind(Object(N.a)(a)),a.closeSuccessMessage=a.closeSuccessMessage.bind(Object(N.a)(a)),a.state={articleId:e.match.params.articleId||0,moduleId:e.match.params.moduleId||0,title:"",articleContent:"",imageUrl:"",articleOrder:0,errors:[],displaySuccess:!1,displayErrors:!1,isLoading:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.state.articleId>0&&this.fetchArticle()}},{key:"fetchArticle",value:function(){var e=this,t={};this.setState({isLoading:!0,loadingMessage:"Loading article ..."}),fetch("/article/get/".concat(this.state.articleId),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json",RequestVerificationToken:v()}}).then(function(e){return e.json()}).then(function(a){t.title=a.title,t.articleContent=a.articleContent,t.imageUrl=a.imageUrl,t.articleOrder=a.articleOrder,t.isLoading=!1,e.setState(t)}).catch(function(e){this.setState({isLoading:!1}),console.log("Error: \n",e)})}},{key:"handleChange",value:function(e){var t,a=e.target,n="checkbox"===a.type?a.checked:a.value,l=a.name;this.setState((t={},Object(C.a)(t,l,n),Object(C.a)(t,"displaySuccess",!1),t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={},n={};n.articleId=this.state.articleId,n.title=this.state.title,n.articleContent=this.state.articleContent,n.imageUrl=this.state.imageUrl,n.articleOrder=this.state.articleOrder,n.moduleId=this.state.moduleId,this.setState({isLoading:!0,loadingMessage:"Saving article ..."}),fetch("/article/update",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json",RequestVerificationToken:v()},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){a.displayErrors=!1,a.displaySuccess=!0,a.isLoading=!1,a.articleId=e.articleId,t.setState(a,t.fetchArticle())}).catch(function(e){this.setState({isLoading:!1}),console.log("Error: \n",e)})}},{key:"closeSuccessMessage",value:function(){this.setState({displaySuccess:!1})}},{key:"closeErrorMessage",value:function(){this.setState({displayErrors:!1})}},{key:"render",value:function(){var e=this,t=this.state.articleId>0?"Edit article : ".concat(this.state.title):"New article";return l.a.createElement("div",{className:"text-white m-sm-5 p-5 bg-dark clearfix"},l.a.createElement(p.a,{to:"/admin/module/settings/".concat(this.state.moduleId,"/settings"),className:"btn btn-outline-info mb-4"},"Back"),l.a.createElement(b,{isLoading:this.state.isLoading,message:this.state.loadingMessage}),l.a.createElement("h4",{className:"text-center"},"Edit the article"),l.a.createElement("hr",null),l.a.createElement("h2",{className:"mb-5 text-center"},t),l.a.createElement(O,{display:this.state.displaySuccess,handleClose:this.closeSuccessMessage,type:"success",message:"Article updated with success"}),l.a.createElement(O,{display:this.state.displayErrors,handleClose:this.closeErrorMessage,type:"danger",messages:this.state.errors}),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(k,{type:"text",handleChange:this.handleChange,title:"Title",name:"title",value:this.state.title}),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"articleContent",className:"col-sm-2 col-form-label"},"Content"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(S.a,{editor:L.a,data:this.state.articleContent,onChange:function(t,a){var n=a.getData();e.setState({articleContent:n})}}))),l.a.createElement(k,{type:"text",handleChange:this.handleChange,title:"Image url",name:"imageUrl",value:this.state.imageUrl}),l.a.createElement(k,{type:"text",handleChange:this.handleChange,title:"Order",name:"articleOrder",value:this.state.articleOrder}),l.a.createElement("button",{className:"btn btn-outline-info mt-5 float-right",type:"submit"},"Valid")))}}]),t}(n.Component),M=function(){return l.a.createElement(h.a,null,l.a.createElement(g.a,{exact:!0,path:"/admin/module/settings/:moduleId/settings",component:y}),l.a.createElement(g.a,{path:"/admin/module/settings/:moduleId/settings/article/:articleId?",component:w}))},x=(a(57),a(58),a(61),function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"module-article"},l.a.createElement(M,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(c.a,null,l.a.createElement(x,null)),document.getElementById("module-article")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.c007f22f.chunk.js.map